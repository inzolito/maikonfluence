<!DOCTYPE html>
<html>
    <head>
        <title>OP PRO LATAM : Install new OpenVPN 2.6.14</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">OP PRO LATAM</a></span>
                            </li>
                                                    <li>
                                <span><a href="OP-PRO-TRM_363369039.html">OP PRO TRM</a></span>
                            </li>
                                                    <li>
                                <span><a href="OP-PRO-4.5-TRM-and-Upgrade_391634901.html">OP PRO 4.5 TRM and Upgrade</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            OP PRO LATAM : Install new OpenVPN 2.6.14
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> JUNIOR Nelson</span>, last modified on sept 22, 2025
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><br/></p><p><br/></p><h1 id="InstallnewOpenVPN2.6.14-VideotutorialforOpenVPNinstallation">Video tutorial for OpenVPN installation</h1><p><span><span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="/download/attachments/414351631/openvpn_2.6.14.mp4?version=1&amp;modificationDate=1758567396973&amp;api=v2" data-nice-type="Multimedia" data-file-src="/download/attachments/414351631/openvpn_2.6.14.mp4?version=1&amp;modificationDate=1758567396973&amp;api=v2" data-linked-resource-id="414351621" data-linked-resource-type="attachment" data-linked-resource-container-id="414351631" data-linked-resource-default-alias="openvpn_2.6.14.mp4" data-mime-type="video/mp4" data-has-thumbnail="false" data-linked-resource-version="1" data-can-edit="false" aria-label="openvpn_2.6.14.mp4" draggable="false"><img src="download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-medium-multimedia.png" height="250" alt="" draggable="false"/><span class="title">openvpn_2.6.14.mp4</span></a></span></span></p><p><br/></p><h1 id="InstallnewOpenVPN2.6.14-Createfileovpn"><span>Create file ovpn</span></h1><p><span><span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="/download/attachments/414351631/Create%20file%20ovpn%20.mp4?version=1&amp;modificationDate=1758567396965&amp;api=v2" data-nice-type="Multimedia" data-file-src="/download/attachments/414351631/Create%20file%20ovpn%20.mp4?version=1&amp;modificationDate=1758567396965&amp;api=v2" data-linked-resource-id="414351623" data-linked-resource-type="attachment" data-linked-resource-container-id="414351631" data-linked-resource-default-alias="Create file ovpn .mp4" data-mime-type="video/mp4" data-has-thumbnail="false" data-linked-resource-version="1" data-can-edit="false" aria-label="Create file ovpn .mp4" draggable="false"><img src="download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-medium-multimedia.png" height="250" alt="" draggable="false"/><span class="title">Create file ovpn .mp4</span></a></span></span></p><p><br/></p><h1 id="InstallnewOpenVPN2.6.14-Filestodownload:"><span>Files to download: </span></h1><p><span><span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="/download/attachments/414351631/install_new_openvpn.sh?version=1&amp;modificationDate=1758567396956&amp;api=v2" data-nice-type="null" data-file-src="/download/attachments/414351631/install_new_openvpn.sh?version=1&amp;modificationDate=1758567396956&amp;api=v2" data-linked-resource-id="414351629" data-linked-resource-type="attachment" data-linked-resource-container-id="414351631" data-linked-resource-default-alias="install_new_openvpn.sh" data-mime-type="application/x-sh" data-has-thumbnail="false" data-linked-resource-version="1" data-can-edit="false" aria-label="install_new_openvpn.sh" draggable="false"><img src="download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-medium-file.png" height="250" alt="" draggable="false"/><span class="title">install_new_openvpn.sh</span></a></span><span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="/download/attachments/414351631/openvpn-config-masep-mine.rb?version=1&amp;modificationDate=1758567396934&amp;api=v2" data-nice-type="null" data-file-src="/download/attachments/414351631/openvpn-config-masep-mine.rb?version=1&amp;modificationDate=1758567396934&amp;api=v2" data-linked-resource-id="414351630" data-linked-resource-type="attachment" data-linked-resource-container-id="414351631" data-linked-resource-default-alias="openvpn-config-masep-mine.rb" data-mime-type="application/octet-stream" data-has-thumbnail="false" data-linked-resource-version="1" data-can-edit="false" aria-label="openvpn-config-masep-mine.rb" draggable="false"><img src="download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-medium-file.png" height="250" alt="" draggable="false"/><span class="title">openvpn-config-masep-mine.rb</span></a></span></span></p><p><br/></p><p><span>Copy the installation file into the desired folder:</span></p><p><span>Make it executable:<br/><br/>chmod +x install_new_openvpn_nelson.sh</span></p><p><span>Run the file:<br/><br/>sudo ./install_new_openvpn_nelson.sh</span></p><p><span>Choose option 1 to install.</span></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="121" src="attachments/414351631/414351601.png" data-image-src="attachments/414351631/414351601.png" data-unresolved-comment-count="0" data-linked-resource-id="414351601" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-44-36-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><span>Create a backup of the openvpn folder and delete the folder:<br/><br/>cp openvpn openvpn_bkp</span></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/414351631/414351604.png" data-image-src="attachments/414351631/414351604.png" data-unresolved-comment-count="0" data-linked-resource-id="414351604" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-44-48-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><span>Now disable the old OpenVPN service, if it exists, to avoid conflicts:<br/><br/>sudo systemctl list-units --type=service --all | grep -i openvpn || true</span></p><p><br/></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="133" src="attachments/414351631/414351605.png" data-image-src="attachments/414351631/414351605.png" data-unresolved-comment-count="0" data-linked-resource-id="414351605" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-44-58-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><span><br/>sudo systemctl disable openvpn.service</span></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="89" src="attachments/414351631/414351606.png" data-image-src="attachments/414351631/414351606.png" data-unresolved-comment-count="0" data-linked-resource-id="414351606" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-45-18-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><span>Check if the service has really stopped:<br/><br/>sudo systemctl stop openvpn.service</span></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="176" src="attachments/414351631/414351609.png" data-image-src="attachments/414351631/414351609.png" data-unresolved-comment-count="0" data-linked-resource-id="414351609" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-48-20-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><span>Use the openvpn-config-masep-mine.rb file as shown in the image below to create a device.<br/>If you want to create all devices from the database, use -v all instead of -v HTK210.<br/><br/>sudo ./openvpn-config-masep-mine.rb -d jmineops -v HTK210 -s server-01 -n 10.40.0.0 -m 255.255.255.0</span></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/414351631/414351610.png" data-image-src="attachments/414351631/414351610.png" data-unresolved-comment-count="0" data-linked-resource-id="414351610" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-48-38-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><span>Run a backup of the current script:<br/><br/>sudo cp -av /etc/init.d/OpenVPN /home/jigsaw/OpenVPN.dist</span></p><p><br/></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" width="724" src="attachments/414351631/414351611.png" data-image-src="attachments/414351631/414351611.png" data-unresolved-comment-count="0" data-linked-resource-id="414351611" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-49-0-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><span>Replace it with a wrapper that calls systemd:<br/><br/>sudo tee /etc/init.d/OpenVPN &gt;/dev/null &lt;&lt;'EOF'<br/>#!/bin/sh<br/>### BEGIN INIT INFO<br/># Provides:          OpenVPN<br/># Required-Start:    $network $remote_fs $syslog<br/># Required-Stop:     $network $remote_fs $syslog<br/># Default-Start:     2 3 4 5<br/># Default-Stop:      0 1 6<br/># Short-Description: Wrapper: delegates to systemd <a class="external-link" href="mailto:openvpn-server@ovpn-qa.servic" rel="nofollow">openvpn-server@ovpn-qa.servic</a>e<br/>### END INIT INFO<br/><br/># NAME=&quot;openvpn-server@<strong>&lt;SERVER NAME&gt;</strong>.service&quot; <br/><br/>NAME=&quot;openvpn-server@server-01.service&quot; <br/><br/>case &quot;$1&quot; in<br/>  start)        exec /bin/systemctl start   &quot;$NAME&quot; ;;<br/>  stop)         exec /bin/systemctl stop    &quot;$NAME&quot; ;;<br/>  restart)      exec /bin/systemctl restart &quot;$NAME&quot; ;;<br/>  reload|force-reload)<br/>                exec /bin/systemctl reload  &quot;$NAME&quot; ;;<br/>  status)       exec /bin/systemctl status  &quot;$NAME&quot; ;;<br/>  *)<br/>    echo &quot;Usage: $0 {start|stop|restart|reload|force-reload|status}&quot; &gt;&amp;2<br/>    exit 1<br/>    ;;<br/>esac<br/>exit 0<br/>EOF</span></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" width="724" src="attachments/414351631/414351613.png" data-image-src="attachments/414351631/414351613.png" data-unresolved-comment-count="0" data-linked-resource-id="414351613" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-49-41-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><span>Grant execution permission:<br/><br/>sudo chmod 0755 /etc/init.d/OpenVPN<br/>or<br/>sudo chmod +x /etc/init.d/OpenVPN</span></p><p><br/></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" width="724" src="attachments/414351631/414351614.png" data-image-src="attachments/414351631/414351614.png" data-unresolved-comment-count="0" data-linked-resource-id="414351614" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-50-24-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><span>Run the command to enable the new OpenVPN:<br/><br/>sudo systemctl enable openvpn-server@server-01</span></p><p><span>Restart the server:<br/><br/>sudo reboot</span></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" width="724" src="attachments/414351631/414351615.png" data-image-src="attachments/414351631/414351615.png" data-unresolved-comment-count="0" data-linked-resource-id="414351615" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-50-44-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" width="724" src="attachments/414351631/414351616.png" data-image-src="attachments/414351631/414351616.png" data-unresolved-comment-count="0" data-linked-resource-id="414351616" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-51-1-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><span>After creating the necessary devices, you will need to copy the certificates from inside the server to the USB drive folder, as shown in the images below.</span></p><p><br/></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" width="724" src="attachments/414351631/414351618.png" data-image-src="attachments/414351631/414351618.png" data-unresolved-comment-count="0" data-linked-resource-id="414351618" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-51-32-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/414351631/414351619.png" data-image-src="attachments/414351631/414351619.png" data-unresolved-comment-count="0" data-linked-resource-id="414351619" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-51-53-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="242" src="attachments/414351631/414351620.png" data-image-src="attachments/414351631/414351620.png" data-unresolved-comment-count="0" data-linked-resource-id="414351620" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2025-9-22_15-51-58-1.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="414351631" data-linked-resource-container-version="2" alt=""></span></span></p><p><br/></p><p><span>Now the system can be loaded to run the application for both Single Core and OPLite.</span></p><p><br/></p><p><br/></p><p><br/></p><p><span><a href="https://confluence.hexagonmining.com/display/OPL/Flash+Drive+Structure+-+Single+Core+and+Standalone" rel="nofollow">Flash Drive Structure - Single Core and Standalone - OP PRO LATAM - Hexagon's Mining division Confluence</a></span></p><p><br/></p><p><br/></p>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351601.png">image-2025-9-22_15-44-36-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351604.png">image-2025-9-22_15-44-48-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351605.png">image-2025-9-22_15-44-58-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351606.png">image-2025-9-22_15-45-18-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351609.png">image-2025-9-22_15-48-20-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351610.png">image-2025-9-22_15-48-38-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351611.png">image-2025-9-22_15-49-0-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351613.png">image-2025-9-22_15-49-41-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351614.png">image-2025-9-22_15-50-24-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351615.png">image-2025-9-22_15-50-44-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351616.png">image-2025-9-22_15-51-1-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351618.png">image-2025-9-22_15-51-32-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351619.png">image-2025-9-22_15-51-53-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351620.png">image-2025-9-22_15-51-58-1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351621.mp4">openvpn_2.6.14.mp4</a> (video/mp4)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351623.mp4">Create file ovpn .mp4</a> (video/mp4)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351629.sh">install_new_openvpn.sh</a> (application/x-sh)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/414351631/414351630.rb">openvpn-config-masep-mine.rb</a> (application/octet-stream)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on dic 05, 2025 11:21</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
