<!DOCTYPE html>
<html>
    <head>
        <title>Product: MineOperate OP Pro : Discriminator Interface</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Product: MineOperate OP Pro</a></span>
                            </li>
                                                    <li>
                                <span><a href="MineOperate-OP-Pro_224018004.html">MineOperate OP Pro</a></span>
                            </li>
                                                    <li>
                                <span><a href="Product-Releases_228590211.html">Product Releases</a></span>
                            </li>
                                                    <li>
                                <span><a href="OP-Pro-3.0_231785728.html">OP Pro 3.0</a></span>
                            </li>
                                                    <li>
                                <span><a href="OP-Pro-3.0-Major-Features_231786275.html">OP Pro 3.0 Major Features</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Product: MineOperate OP Pro : Discriminator Interface
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> GEORGE Nathan</span> on feb 17, 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><h1 id="DiscriminatorInterface-/*&lt;![CDATA[*/div.rbtoc1764958723959{padding:0px;}div.rbtoc1764958723959ul{margin-left:0px;}div.rbtoc1764958723959li{margin-left:0px;padding-left:0px;}/*]]&gt;*/Summary#DiscriminatorInterface-SummaryTheDiscriminatorpanel#DiscriminatorIn"><style type='text/css'>/*<![CDATA[*/
div.rbtoc1764958723959 {padding: 0px;}
div.rbtoc1764958723959 ul {margin-left: 0px;}
div.rbtoc1764958723959 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1764958723959'>
<ul class='toc-indentation'>
<li><a href='#DiscriminatorInterface-Summary'>Summary</a></li>
<li><a href='#DiscriminatorInterface-TheDiscriminatorpanel'>The Discriminator panel</a></li>
<li><a href='#DiscriminatorInterface-TheTruckpanel'>The Truck panel</a>
<ul class='toc-indentation'>
<li><a href='#DiscriminatorInterface-Afterarrivingatadiscriminator'>After arriving at a discriminator</a></li>
<li><a href='#DiscriminatorInterface-Aftertheloadhasbeenscanned'>After the load has been scanned</a></li>
</ul>
</li>
<li><a href='#DiscriminatorInterface-Configurationofthedatabase'>Configuration of the database</a></li>
<li><a href='#DiscriminatorInterface-XMLfilestobeloaded'>XML files to be loaded</a></li>
<li><a href='#DiscriminatorInterface-Configurationofthediscriminatorpanels'>Configuration of the discriminator panels</a></li>
<li><a href='#DiscriminatorInterface-Configurationofthetruckpanels'>Configuration of the truck panels</a></li>
<li><a href='#DiscriminatorInterface-ConfigurationofOpProManager'>Configuration of Op Pro Manager</a></li>
<li><a href='#DiscriminatorInterface-Examplevideosofthetruckanddiscriminatorpanelsinuseonsite'>Example videos of the truck and discriminator panels in use onsite</a></li>
<li><a href='#DiscriminatorInterface-TheATDprotocol'>The ATD protocol</a></li>
<li><a href='#DiscriminatorInterface-Discriminatordebugging'>Discriminator debugging</a></li>
</ul>
</div></h1><h1 id="DiscriminatorInterface-Summary">Summary</h1><p>The discriminator interface has been developed for the ERA Ranger Mine (Rio Tinto).   The work is being done under 
<span class="jira-issue lock-jira-issue PBOP-276"
      data-jira-key="PBOP-276" >
        <a class=issue-link" href="https://jira.hexagonmining.com/browse/PBOP-276?src=confmacro">PBOP-276</a>
        <span class="oauth-msg"> -
            <a class="static-oauth-init" href="https://confluence.hexagonmining.com/plugins/servlet/applinks/oauth/login-dance/authorize?applicationLinkID=ab53f6db-1037-3a9d-bb3c-d8ebd242d4b5">Autenticar</a> para ver datos del tique
        </span>
    </span>
</p><p>The enhancements are done under <a class="external-link" href="https://jira.hexagonmining.com/browse/MOPS-23800" rel="nofollow">MOPS-23800</a></p><p>After being loaded by a shovel a truck is immediately given a dumping assignment. If it drives to a discriminator unit, where the load can be scanned to get a reading on the Uranium levels of the load, the activity is changed to &quot;assessing_load&quot;. Once the levels are known a dump will be auto-assigned/chosen and the truck will be directed to there for dumping it's load. For the activity to change from &quot;hauling&quot; to &quot;assessing_load&quot;, the following are considered:</p><ol><li>Is the discriminator feature enabled?</li><li>Is the truck in the Beacon of any Discriminator?</li><li>Is the speed of the truck is less than the configured speed?</li><li>Has the load not been scanned yet?</li></ol><p>If the answers to all the above questions are &quot;YES&quot;, then the following happens:</p><ol><li>The activity of the truck is automatically changed to &quot;assessing_load&quot; when the truck is approaching the Discriminator.</li><li>The current dump assignment is deleted</li><li>The button on the truck panel is enabled for the truck operator to request the scan.</li><li>Once the scan is completed, the truck gets the new dump assignment.<br/>4.1 If the dump assignment doesn't happen automatically, a dialog with the list of available active dumps is shown for the operator to select one by clicking on &quot;cancel reading&quot; button</li><li>The activity is changed to &quot;hauling&quot; and the best path is updated on the map.</li></ol><p>In another case, if the answers to all the above questions are <strong>&quot;YES&quot;</strong> but the truck didn't stop at Discriminator to scan the load.</p><ol><li>Once the truck leaves the Discriminator Beacon without scan, the activity is changed back to &quot;hauling&quot;</li><li>Gets the new dump assignment which actually matches the previous assignment.</li><li>The button on the truck panel is disabled.</li><li>If it enters the Beacon of another/same discriminator again, all the previous questions still apply.</li></ol><p>This is what a discriminator looks like:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/211194263/211194262.png" data-image-src="attachments/211194263/211194262.png" data-unresolved-comment-count="0" data-linked-resource-id="211194262" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2019-11-1_9-40-19.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="211194263" data-linked-resource-container-version="29" alt=""></span></p><p>The discriminator is connected to a Jigsaw hub through a serial connection.  This hub will send and receive messages with the truck's hub via the site wifi network.</p><h1 id="DiscriminatorInterface-TheDiscriminatorpanel">The Discriminator panel</h1><p>The discriminator panel is designed for automated operations and usually does not require an operator present.  There is a manual interface for selecting a truck. Once the truck is selected, the scanning is done and the reading is updated in the system.<br/>If reading the Uranium level doesn't complete automatically in configured time, a Numpad is shown to enter the value manually and submit.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/211194263/211195986.png" data-image-src="attachments/211194263/211195986.png" data-unresolved-comment-count="0" data-linked-resource-id="211195986" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2019-11-6_14-14-16.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="211194263" data-linked-resource-container-version="29" alt=""></span></p><p>(Note the map and panel icons are to be updated with new images when available)</p><p>By pressing the &quot;Manual Truck Entry&quot; button the discriminator operator can then select a truck to be notified. If the notification doesn't happen automatically, the Numpad is shown to enter the reading.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/211194263/211195988.png" data-image-src="attachments/211194263/211195988.png" data-unresolved-comment-count="0" data-linked-resource-id="211195988" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2019-11-6_14-15-24.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="211194263" data-linked-resource-container-version="29" alt=""></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/211194263/211195989.png" data-image-src="attachments/211194263/211195989.png" data-unresolved-comment-count="0" data-linked-resource-id="211195989" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2019-11-6_14-16-2.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="211194263" data-linked-resource-container-version="29" alt=""></span></p><h1 id="DiscriminatorInterface-TheTruckpanel">The Truck panel</h1><h2 id="DiscriminatorInterface-Afterarrivingatadiscriminator">After arriving at a discriminator</h2><p>When the truck just before arrives at the discriminator the &quot;Get Uranium Reading&quot; button will be enabled allowing the operator to request his load to be scanned once he stops at the Discriminator.   Pressing this will send a message to the discriminator panel to start the scanning process (Note that this can take up to 3 minutes to complete).</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/211194263/228621855.png" data-image-src="attachments/211194263/228621855.png" data-unresolved-comment-count="0" data-linked-resource-id="228621855" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2020-12-21_14-11-48.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="211194263" data-linked-resource-container-version="29" alt=""></span></p><p><br/></p><p>Once the operator presses the &quot;Get Uranium Reading&quot; button, the button is turned to &quot;Canel Uranium Reading&quot;. If the dump assignment is not done automatically, the operator can press the &quot;Cancel Uranium Reading&quot; button and select the dump from the list that is shown when the button is pressed.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/211194263/228621859.png" data-image-src="attachments/211194263/228621859.png" data-unresolved-comment-count="0" data-linked-resource-id="228621859" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2020-12-21_14-54-22.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="211194263" data-linked-resource-container-version="29" alt=""></span></p><h2 id="DiscriminatorInterface-Aftertheloadhasbeenscanned">After the load has been scanned</h2><p>When the discriminator has finished scanning the truck load the truck will be notified of the uranium level content of the load and an assignment to a dump will be generated.   The truck proceeds to the dump as per normal.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/211194263/211194273.png" data-image-src="attachments/211194263/211194273.png" data-unresolved-comment-count="0" data-linked-resource-id="211194273" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2019-11-1_10-36-42.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="211194263" data-linked-resource-container-version="29" alt=""></span></p><h1 id="DiscriminatorInterface-Configurationofthedatabase">Configuration of the database</h1><p>The 559_add_discriminator_fields.rb migration script should take care of everything but here are the changes to the database</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Table</th><th class="confluenceTh">Action</th><th class="confluenceTh">Field</th><th class="confluenceTh">Type</th></tr><tr><td class="confluenceTd">beacons</td><td class="confluenceTd">add column</td><td class="confluenceTd">discriminator_id</td><td class="confluenceTd">real</td></tr><tr><td colspan="1" class="confluenceTd">hauling</td><td colspan="1" class="confluenceTd"><span>add column</span></td><td colspan="1" class="confluenceTd">content</td><td colspan="1" class="confluenceTd">real</td></tr><tr><td colspan="1" class="confluenceTd">locations</td><td colspan="1" class="confluenceTd"><span>add column</span></td><td colspan="1" class="confluenceTd">min_content</td><td colspan="1" class="confluenceTd">real</td></tr><tr><td colspan="1" class="confluenceTd">locations</td><td colspan="1" class="confluenceTd"><span>add column</span></td><td colspan="1" class="confluenceTd">max_content</td><td colspan="1" class="confluenceTd">real</td></tr><tr><td colspan="1" class="confluenceTd">shift_dumps</td><td colspan="1" class="confluenceTd"><span>add column</span></td><td colspan="1" class="confluenceTd">content</td><td colspan="1" class="confluenceTd">real</td></tr><tr><td colspan="1" class="confluenceTd">shift_loads</td><td colspan="1" class="confluenceTd"><span>add column</span></td><td colspan="1" class="confluenceTd">content</td><td colspan="1" class="confluenceTd">real</td></tr></tbody></table></div><h1 id="DiscriminatorInterface-XMLfilestobeloaded"><br/>XML files to be loaded</h1><p>Load the following XML files to add the required devices and configurations to the system</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">XML</th><th class="confluenceTh">Contents</th></tr><tr><td class="confluenceTd">functionality/Discriminator.xml</td><td class="confluenceTd"><p>MineOps views</p><p>oem.discriminator.truck device</p><p>Truck configurations to enable loads to be scanned by discriminators</p></td></tr><tr><td class="confluenceTd">hardware_drivers/hw.core.xml</td><td class="confluenceTd">Symbols for AMDEL discriminators connected to CoreLP devices</td></tr><tr><td class="confluenceTd">oem_interfaces/Amdel.xml</td><td class="confluenceTd"><p>oem.discriminator.amdel device</p><p>Discriminator panel configurations and sensors</p></td></tr><tr><td colspan="1" class="confluenceTd">product_templates/lgs.amdel.core+smart.xml</td><td colspan="1" class="confluenceTd">lgs.amdel.core+smart device</td></tr></tbody></table></div><p><br/></p><h1 id="DiscriminatorInterface-Configurationofthediscriminatorpanels">Configuration of the discriminator panels</h1><ol><li><p>Create a &quot;Discriminator&quot; device group</p></li><li>Create a device for each discriminator under this group.  Also add the lgs.amdel.core+smart device as a parent</li><li>Add &quot;discriminator&quot; to the enum attributes for EquipmentType</li><li>Create an EquipmentType enum for the model of discriminator - Select the &quot;discriminator&quot; enum attribute</li><li>Create a Project for the discriminators<br/><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/211194263/211194280.png" data-image-src="attachments/211194263/211194280.png" data-unresolved-comment-count="0" data-linked-resource-id="211194280" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2019-11-1_11-3-29.png" data-base-url="https://confluence.hexagonmining.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="211194263" data-linked-resource-container-version="29" alt=""></span></li><li>Create the equipment record for each discriminator - Class and Project should be &quot;Discriminator&quot;</li><li><p>Add a site specific canvas_layers to the discriminators.  An example is given below:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Module</th><th class="confluenceTh">Devices</th><th class="confluenceTh">Application</th><th class="confluenceTh">Attribute</th><th colspan="1" class="confluenceTh">Value</th></tr><tr><td colspan="1" class="confluenceTd">jspanel</td><td colspan="1" class="confluenceTd">Discriminator</td><td colspan="1" class="confluenceTd">JSPanel</td><td colspan="1" class="confluenceTd">canvas_layers</td><td colspan="1" class="confluenceTd">trucks=enabled,layermenu;roads=enabled,layermenu;discriminators=enabled,layermenu</td></tr></tbody></table></div></li></ol><h1 id="DiscriminatorInterface-Configurationofthetruckpanels">Configuration of the truck panels</h1><ol><li><p>Add the <span>oem.discriminator.truck device as a parent of either the truck devices directly or one of their parent devices to activate the &quot;Get Uranium Reading&quot; button on the panels.</span></p></li><li><p>Add the discriminators layer to the truck panels and any other equipment that is required to see them on the mine map.<br/><br/></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Module</th><th class="confluenceTh">Devices</th><th class="confluenceTh">Application</th><th class="confluenceTh">Attribute</th><th class="confluenceTh">Value</th></tr><tr><td colspan="1" class="confluenceTd">jspanel</td><td colspan="1" class="confluenceTd">truck</td><td colspan="1" class="confluenceTd">JSPanel</td><td colspan="1" class="confluenceTd">canvas_layers</td><td colspan="1" class="confluenceTd">...<strong>;discriminators=enabled,layermenu</strong></td></tr></tbody></table></div></li><li><p>Change the truck project to add &quot;Assessing Load&quot; to the activity list.  This new activity is to come before the hauling activity in the truck project.</p><div class="table-wrap"><table class="wrapped confluenceTable" style="margin-left: 2.0px;"><colgroup><col/><col/></colgroup><tbody><tr><th style="text-align: center;" class="confluenceTh">description</th><th style="text-align: center;" class="confluenceTh">activities</th></tr><tr><td class="confluenceTd"> Truck</td><td class="confluenceTd">moving_empty:empty,moving_loaded:loaded,empty:traveling,loaded:hauling,inactive:inactive,traveling,waiting,<strong>loading:hauling</strong>,hauling:queued,tipping:traveling,queued:tipping,<strong>assessing_load:hauling</strong></td></tr></tbody></table></div></li><li><p>If necessary restart the truck panels to activate the new configurations.<br/><br/></p></li></ol><h1 id="DiscriminatorInterface-ConfigurationofOpProManager">Configuration of Op Pro Manager</h1><ol><li><p>Add the Discriminator view to required OPProManager menu.   Also add the discriminator layer to the MineMap.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Module</th><th class="confluenceTh">Devices</th><th class="confluenceTh">Application</th><th class="confluenceTh">Attribute</th><th class="confluenceTh">Value</th><th colspan="1" class="confluenceTh">comment</th></tr><tr><td colspan="1" class="confluenceTd">aux_menu_view</td><td colspan="1" class="confluenceTd">OFFICE</td><td colspan="1" class="confluenceTd">jminegraph</td><td colspan="1" class="confluenceTd">init</td><td colspan="1" class="confluenceTd">views=...<strong>,discriminator</strong></td><td colspan="1" class="confluenceTd">Add the discriminator view to the menu you want it to appear in</td></tr><tr><td colspan="1" class="confluenceTd">canvas_view</td><td colspan="1" class="confluenceTd">OFFICE</td><td colspan="1" class="confluenceTd">jminegraph</td><td colspan="1" class="confluenceTd">init</td><td colspan="1" class="confluenceTd">views=...<strong>,discriminator_layer</strong></td><td colspan="1" class="confluenceTd">Add the discriminator layer to the Mine Map</td></tr><tr><td colspan="1" class="confluenceTd">canvas_view</td><td colspan="1" class="confluenceTd">OFFICE</td><td colspan="1" class="confluenceTd">jminegraph</td><td colspan="1" class="confluenceTd">list_order</td><td colspan="1" class="confluenceTd">...<strong>,discriminator_layer</strong></td><td colspan="1" class="confluenceTd"><span>Add the discriminator layer to the Mine Map</span></td></tr></tbody></table></div></li><li><p>Change the existing views to add the new content fields<br/><br/></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Module</th><th class="confluenceTh">Devices</th><th class="confluenceTh">Application</th><th class="confluenceTh">Attribute</th><th class="confluenceTh">Value</th><th class="confluenceTh">comment</th></tr><tr><td class="confluenceTd">truck_view</td><td class="confluenceTd">OFFICE</td><td class="confluenceTd">jminegraph</td><td class="confluenceTd">init</td><td class="confluenceTd">attrs=...<strong>,hauling.content:ro</strong></td><td class="confluenceTd">The scanned Uranium Level for the current truck load</td></tr><tr><td class="confluenceTd">dump_view</td><td class="confluenceTd">OFFICE</td><td class="confluenceTd">jminegraph</td><td class="confluenceTd">init</td><td class="confluenceTd">attrs=...<strong>,min_content,max_content</strong></td><td class="confluenceTd">The minimum and maximum content levels accepted by the dump</td></tr></tbody></table></div><p>These min_content and max_content fields will need to be set for each dumping location that will accept a discriminated load.   Both values must be provided before the location will be considered.</p><p><br/></p></li></ol><h1 id="DiscriminatorInterface-Examplevideosofthetruckanddiscriminatorpanelsinuseonsite">Example videos of the truck and discriminator panels in use onsite</h1><p>The videos below show the interactions between the truck and discriminator panels including the time it takes for a scan to complete.   This should give you an idea of what it should look like when you have it correctly setup.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><td class="confluenceTd"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="/download/attachments/211194263/video-20210106-025337-58d92f91.mov?version=1&amp;modificationDate=1609911639618&amp;api=v2" data-nice-type="Multimedia" data-file-src="/download/attachments/211194263/video-20210106-025337-58d92f91.mov?version=1&amp;modificationDate=1609911639618&amp;api=v2" data-linked-resource-id="231279029" data-linked-resource-type="attachment" data-linked-resource-container-id="211194263" data-linked-resource-default-alias="video-20210106-025337-58d92f91.mov" data-mime-type="video/quicktime" data-has-thumbnail="false" data-linked-resource-version="1" data-can-edit="false" aria-label="video-20210106-025337-58d92f91.mov" draggable="false"><img src="download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-medium-multimedia.png" height="250" alt="" draggable="false"/><span class="title">video-20210106-025337-58d92f91.mov</span></a></span></p></div></td><td class="confluenceTd"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper"><a class="confluence-embedded-file" href="/download/attachments/211194263/video-20210106-041500-2abdd4fa.mov?version=1&amp;modificationDate=1609911697491&amp;api=v2" data-nice-type="Multimedia" data-file-src="/download/attachments/211194263/video-20210106-041500-2abdd4fa.mov?version=1&amp;modificationDate=1609911697491&amp;api=v2" data-linked-resource-id="231279031" data-linked-resource-type="attachment" data-linked-resource-container-id="211194263" data-linked-resource-default-alias="video-20210106-041500-2abdd4fa.mov" data-mime-type="video/quicktime" data-has-thumbnail="false" data-linked-resource-version="1" data-can-edit="false" aria-label="video-20210106-041500-2abdd4fa.mov" draggable="false"><img src="download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-medium-multimedia.png" height="250" alt="" draggable="false"/><span class="title">video-20210106-041500-2abdd4fa.mov</span></a></span></p></div></td></tr></tbody></table></div><p><br/></p><h1 id="DiscriminatorInterface-TheATDprotocol">The ATD protocol</h1><p>This section describes the protocol used to talk to the AMDEL Truck Discriminator.</p><p>The protocol document RUM-atd_fms_interface.pdf can be found attached to PBOP-276.  This describes the messages and interactions used.</p><p>The comments in MOPS-22441 describe how to send and receive test messages to the interface to simulate and debug the process.</p><h1 id="DiscriminatorInterface-Discriminatordebugging">Discriminator debugging</h1><p>The JAMS module has a couple of channels for logging to allow for debugging the discriminator (on the discriminator panel)</p><p>The discriminator log is a high level overview of the messages being sent to and received from the OEM interface</p><p>JAMS&gt; enable discriminator</p><p>10:06:11.014 discriminator: Status for truck 0<br/>10:06:11.015 discriminator: Sending: S,0<br/>10:06:11.055 discriminator: Received: &gt;S,0,0,0,0;f047<br/>10:06:11.055 discriminator: Status for truck 0<br/>10:06:11.055 discriminator: Sending: S,0<br/>10:06:11.056 discriminator: Received: &gt;S,0,0,0,0;f047<br/>10:06:11.056 discriminator: Status for truck 0<br/>10:06:11.056 discriminator: Sending: S,0<br/>10:06:11.097 discriminator: Received: &gt;S,0,0,0,0;f047<br/>10:06:11.097 discriminator: Status for truck 0<br/>10:06:11.097 discriminator: Sending: S,0<br/>10:06:11.098 discriminator: Received: &gt;S,0,0,0,0;f047<br/>10:06:11.098 discriminator: Status for truck 0<br/>10:06:11.098 discriminator: Sending: S,0<br/>10:06:11.142 discriminator: Received: &gt;S,0,0,0,0;f047<br/>10:06:11.142 discriminator: Status for truck 0</p><p>The discriminator/debug channel shows the low level data bytes that are being sent to and received from the OEM interface</p><p>JAMS&gt; enable discriminator/debug</p><p>10:18:14.859 discriminator/debug: Send: &lt;3c532c30 3b424544 410d&gt;<br/>10:18:14.859 discriminator/debug: Send: &lt;3c532c30 3b424544 410d&gt;<br/>10:18:14.900 discriminator/debug: Receive: &lt;3e532c30 2c302c30 2c303b66 3034370d&gt;<br/>10:18:14.901 discriminator/debug: Send: &lt;3c532c30 3b424544 410d&gt;<br/>10:18:14.902 discriminator/debug: Receive: &lt;3e532c30 2c302c30 2c303b66 3034370d&gt;<br/>10:18:14.903 discriminator/debug: Send: &lt;3c532c30 3b424544 410d&gt;<br/>10:18:14.943 discriminator/debug: Receive: &lt;3e532c30 2c302c30 2c303b66 3034370d&gt;<br/>10:18:14.944 discriminator/debug: Send: &lt;3c532c30 3b424544 410d&gt;<br/>10:18:14.984 discriminator/debug: Receive: &lt;3e532c30 2c302c30 2c303b66 3034370d&gt;<br/>10:18:14.984 discriminator/debug: Receive: &lt;3e532c30 2c302c30 2c303b66 3034370d&gt;<br/>10:18:14.985 discriminator/debug: Send: &lt;3c532c30 3b424544 410d&gt;<br/>10:18:14.985 discriminator/debug: Send: &lt;3c532c30 3b424544 410d&gt;<br/>10:18:15.025 discriminator/debug: Receive: &lt;3e532c30 2c302c30 2c303b66 3034370d&gt;<br/>10:18:15.026 discriminator/debug: Send: &lt;3c532c30 3b424544 410d&gt;<br/>10:18:15.066 discriminator/debug: Receive: &lt;3e532c30 2c302c30 2c303b66 3034370d&gt;<br/>10:18:15.066 discriminator/debug: Receive: &lt;3e532c30 2c302c30 2c303b66 3034370d&gt;</p></p>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on dic 05, 2025 11:18</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
