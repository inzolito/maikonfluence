<!DOCTYPE html>
<html>
    <head>
        <title>Product: MineOperate OP Pro : OP Pro Data Health Check</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Product: MineOperate OP Pro</a></span>
                            </li>
                                                    <li>
                                <span><a href="MineOperate-OP-Pro_224018004.html">MineOperate OP Pro</a></span>
                            </li>
                                                    <li>
                                <span><a href="Product-Information_224018007.html">Product Information</a></span>
                            </li>
                                                    <li>
                                <span><a href="Data-Quality_298713438.html">Data Quality</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Product: MineOperate OP Pro : OP Pro Data Health Check
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Usuario desconocido (murr)</span>, last modified by <span class='editor'> GEORGE Nathan</span> on abr 19, 2023
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>OP Pro is an incredibly configurable system but this also means it can become messy over time.</p><p>There are certain standard things we can check in the data to ensure a consistent and accurate data quality standard.</p><p>The idea behind this page is to start documenting what those checks might be, put into a standard template and start being proactive with customers in getting these issues resolved.</p><p>This is by no means a complete list - more should be added over time</p><p><br/></p><div class="table-wrap"><table class="fixed-table wrapped confluenceTable"><colgroup><col style="width: 118.0px;"/><col style="width: 489.0px;"/><col style="width: 691.0px;"/><col style="width: 135.0px;"/></colgroup><tbody><tr><th class="confluenceTh">Type</th><th class="confluenceTh">Check</th><th class="confluenceTh">Query</th><th class="confluenceTh">Expected Results</th></tr><tr><td class="confluenceTd">Locations</td><td class="confluenceTd"><p>Are all locations that have been used configured with the minimum of data and is it consistent</p><ul><li>Does the location have a region defined</li><li>Does it have GPS coordinates and do they make sense</li><li>Does the location have either the type or location_type_id populated</li></ul></td><td class="confluenceTd"><pre>SELECT<br/>    (CASE <br/>        WHEN l.region_id IS NULL THEN 'Missing Region'<br/>        WHEN l.type IS NULL and l.location_type_id IS NULL THEN 'Missing Location Type'<br/>        WHEN l.longitude IS NULL OR l.latitude IS NULL OR l.elevation IS NULL THEN 'Missing GPS Coords'<br/>        WHEN l.elevation &lt;= -1000 OR l.elevation &gt;= 40000 THEN 'Bad Elevation'<br/>        ELSE 'OK'<br/>    END) as Result<br/>    , <a class="external-link" href="http://l.id" rel="nofollow">l.id</a><br/>    , l.type as location_type_name<br/>    , <a class="external-link" href="http://et.name" rel="nofollow">et.name</a> as location_type_enum_name<br/>    , <a class="external-link" href="http://l.name" rel="nofollow">l.name</a><br/>    , l.created_at<br/>    , l.updated_at<br/>    , l.deleted_at<br/>    , l.region_id<br/>    , l.location_type_id<br/>    , l.latitude<br/>    , l.longitude<br/>    , l.elevation<br/>FROM locations l <br/>    LEFT OUTER JOIN enum_tables et ON <a class="external-link" href="http://et.id" rel="nofollow">et.id</a> = l.location_type_id<br/>WHERE <a class="external-link" href="http://l.id" rel="nofollow">l.id</a> IN <br/>    (<br/>        SELECT sl.blast_id FROM shift_loads sl <br/>        UNION SELECT sd.dump_id FROM shift_dumps sd<br/>        UNION SELECT ss.location_id FROM shift_states ss<br/>    )</pre></td><td class="confluenceTd">All Result values are 'OK'</td></tr><tr><td class="confluenceTd">Materials</td><td class="confluenceTd"><p>Do all materials that have been used have all the key information (name, ordinal, symbol)</p><ul><li>Do they have a material category configured</li><li>Do they have at least one value in material_tonnages</li></ul></td><td class="confluenceTd"><pre>SELECT<br/>    (CASE <br/>        WHEN <a class="external-link" href="http://et.name" rel="nofollow">et.name</a> IS NULL THEN 'Missing Name'<br/>        WHEN et.symbol IS NULL THEN 'Missing Symbol'<br/>        WHEN et.ordinal IS NULL THEN 'Missing Ordinal'<br/>        WHEN (<a class="external-link" href="http://etc.id" rel="nofollow">etc.id</a> IS NULL AND <a class="external-link" href="http://et.name" rel="nofollow">et.name</a> != 'Empty') THEN 'Missing Material Category'<br/>        WHEN (mt.tonnage IS NULL AND <a class="external-link" href="http://et.name" rel="nofollow">et.name</a> != 'Empty') THEN 'Missing Material Tonnage'        <br/>        ELSE 'OK'<br/>    END) as result<br/>    , <a class="external-link" href="http://et.id" rel="nofollow">et.id</a><br/>    , <a class="external-link" href="http://et.name" rel="nofollow">et.name</a><br/>    , et.symbol<br/>    , et.attributes<br/>    , et.ordinal<br/>    , ec.category_id<br/>    , <a class="external-link" href="http://etc.name" rel="nofollow">etc.name</a> as category_name<br/>    , mt.tonnage<br/>    , mt.volume<br/>FROM enum_tables et<br/>    LEFT OUTER JOIN enum_categories ec ON <a class="external-link" href="http://et.id" rel="nofollow">et.id</a> = ec.enum_value_id<br/>    LEFT OUTER JOIN enum_tables etc ON ec.category_id = <a class="external-link" href="http://etc.id" rel="nofollow">etc.id</a><br/>    LEFT OUTER JOIN material_tonnages mt ON mt.material_category_id = <a class="external-link" href="http://etc.id" rel="nofollow">etc.id</a> AND mt.start_date = (SELECT MAX(start_date) FROM material_tonnages mt1 WHERE mt1.material_category_id = mt.material_category_id)<br/>WHERE et.type = 'Material'<br/>  and <a class="external-link" href="http://et.id" rel="nofollow">et.id</a> IN (<br/>    SELECT sl.material_id FROM shift_loads sl<br/>  )</pre></td><td class="confluenceTd">All Result values are 'OK'</td></tr><tr><td colspan="1" class="confluenceTd">Equipment</td><td colspan="1" class="confluenceTd"><p>For all equipment that has been used check for the following</p><ul><li>Does it have a name and type</li><li>Does it have an equipment_type_id (aka model)</li><li>If it is a truck or a shovel does it have size data</li><li>If the device name matches the equipment name</li><li>If the device has been configured correctly<ul><li>Does it have an IP address</li><li>Does it have an installed version</li><li>Does it have a device type</li><li>Does it have a platform version</li><li>But only flag if it already has at least one of those defined</li><li>If all these fields are null then it is likely a virtual equipment</li></ul></li></ul></td><td colspan="1" class="confluenceTd"><pre>SELECT<br/>    (CASE<br/>        WHEN <a class="external-link" href="http://e.name" rel="nofollow">e.name</a> IS NULL THEN 'Missing Name'<br/>        WHEN e.type IS NULL THEN 'Missing Type'<br/>        WHEN e.equipment_type_id IS NULL THEN 'Missing Model Information'<br/>        WHEN e.type = 'Truck' AND e.size IS NULL THEN 'Truck Missing Size Data'<br/>        WHEN e.type = 'Shovel' AND e.size IS NULL THEN 'Shovel Missing Size Data'<br/>        WHEN <a class="external-link" href="http://e.name" rel="nofollow">e.name</a> != <a class="external-link" href="http://d.name" rel="nofollow">d.name</a> THEN 'Device Name Does Not Match Equipment Name'<br/>        WHEN (d.address IS NULL OR d.installed_version IS NULL OR d.device_type IS NULL OR d.platform_version IS NULL) AND NOT (d.address IS NULL AND d.installed_Version IS NULL AND d.device_type IS NULL and d.platform_version IS NULL) THEN 'Check Device Configuration'<br/>        ELSE 'OK'<br/>    END) as Result<br/>    , <a class="external-link" href="http://e.id" rel="nofollow">e.id</a><br/>    , e.type<br/>    , <a class="external-link" href="http://e.name" rel="nofollow">e.name</a><br/>    , e.created_at<br/>    , e.updated_at<br/>    , e.deleted_at<br/>    , e.device_id<br/>    , e.equipment_type_id as equipment_type_id<br/>    , <a class="external-link" href="http://ett.name" rel="nofollow">ett.name</a> as equipment_type_name<br/>    , e.size<br/>    , <a class="external-link" href="http://d.id" rel="nofollow">d.id</a> as device_id<br/>    , <a class="external-link" href="http://d.name" rel="nofollow">d.name</a> as device_name<br/>    , d.address as device_address<br/>    , d.installed_version<br/>    , d.device_type<br/>    , d.platform_version<br/>FROM equipment e<br/>    LEFT OUTER JOIN enum_tables ett ON e.equipment_type_id = <a class="external-link" href="http://ett.id" rel="nofollow">ett.id</a><br/>    LEFT OUTER JOIN devices d ON e.device_id = <a class="external-link" href="http://d.id" rel="nofollow">d.id</a><br/>WHERE <a class="external-link" href="http://e.id" rel="nofollow">e.id</a> IN <br/>    (<br/>        SELECT shovel_id FROM shift_loads<br/>        UNION SELECT truck_id FROM shift_loads<br/>        UNION SELECT equipment_id FROM shift_states<br/>    )<br/>ORDER BY e.type, e.name</pre></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Reasons</td><td colspan="1" class="confluenceTd"><p>For all reason codes that have been used check for the following</p><ul><li>Does it have a status?</li><li>Is the status in the enum table?</li><li>Does it have a time category?</li><li>Is the time category in the enum table?</li><li>Does it have a code?</li></ul></td><td colspan="1" class="confluenceTd">SELECT<br/>    (CASE <br/>        WHEN r.status_id IS NULL THEN 'Missing Status' <br/>        WHEN <a class="external-link" href="http://ets.name" rel="nofollow">ets.name</a> IS NULL THEN 'Status Does Not Exist'<br/>        WHEN r.time_category_id IS NULL THEN 'Missing Time Category'<br/>        WHEN <a class="external-link" href="http://etc.name" rel="nofollow">etc.name</a> IS NULL THEN 'Time Category Does Not Exist'<br/>        WHEN r.code IS NULL THEN 'Missing Code'<br/>        ELSE 'OK' END) as Result<br/>    , <a class="external-link" href="http://r.id" rel="nofollow">r.id</a><br/>    , r.code<br/>    , r.created_at<br/>    , r.updated_at<br/>    , r.deleted_at<br/>    , r.status_id<br/>    , <a class="external-link" href="http://ets.name" rel="nofollow">ets.name</a> as status_name<br/>    , r.descrip<br/>    , r.time_category_id<br/>    , <a class="external-link" href="http://etc.name" rel="nofollow">etc.name</a> as time_category_name<br/>    , r.reason_category_id<br/>    , r.equipment_types<br/>FROM reasons r<br/>    LEFT OUTER JOIN enum_tables ets ON r.status_id = <a class="external-link" href="http://ets.id" rel="nofollow">ets.id</a><br/>    LEFT OUTER JOIN enum_tables etc ON r.time_category_id = <a class="external-link" href="http://etc.id" rel="nofollow">etc.id</a><br/>WHERE <a class="external-link" href="http://r.id" rel="nofollow">r.id</a> IN (SELECT DISTINCT ss.reason_id FROM shift_states ss WHERE ss.deleted_at IS NULL)</td><td colspan="1" class="confluenceTd"><br/></td></tr></tbody></table></div><p><br/></p><p><br/></p>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on dic 05, 2025 11:10</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
