<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Directorio</title>

  <!-- Fuente elegante -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400&display=swap" rel="stylesheet">

  <!-- Particles.js para constelaciones -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

  <style>
    body {
      margin: 0;
      background: #000;
      color: #e4e4e4;
      font-family: 'Inter', sans-serif;
      overflow-x: hidden;
    }

    #bg {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0; left: 0;
      z-index: -1;
    }

    h1 {
      font-weight: 300;
      text-align: center;
      margin-top: 50px;
      font-size: 3rem;
    }

    h2 {
      font-weight: 200;
      text-align: center;
      opacity: 0.7;
      margin-top: -10px;
    }

    #lista {
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
    }

    #lista a {
      display: block;
      color: #7fb4ff;
      text-decoration: none;
      font-size: 1.3rem;
      border: 1px solid #7fb4ff55;
      padding: 10px 15px;
      border-radius: 8px;
      margin-bottom: 12px;
      transition: 0.2s;
      backdrop-filter: blur(3px);
    }

    #lista a:hover {
      background: #7fb4ff22;
    }
  </style>
</head>

<body>

<div id="bg"></div>

<h1>Directorio</h1>
<h2>Carpetas disponibles</h2>

<div id="lista">Cargando...</div>

<script>
// Constelaciones
particlesJS("bg", {
  particles: {
    number: { value: 100 },
    size: { value: 2 },
    color: { value: "#7fb4ff" },
    line_linked: { enable: true, distance: 150, color: "#7fb4ff" },
    move: { speed: 1.1 }
  }
});

// Listado rÃ¡pido de carpetas sin backend
async function cargarCarpetas() {
  const lista = document.getElementById("lista");
  lista.innerHTML = "Cargando...";

  let html = "";
  try {
    const resp = await fetch(".", { cache: "no-store" });
    html = await resp.text();
  } catch {
    lista.innerHTML = "No se pudo leer el directorio.";
    return;
  }

  // parsear como HTML
  const doc = new DOMParser().parseFromString(html, "text/html");
  const anchors = [...doc.querySelectorAll("a")];

  lista.innerHTML = "";

  anchors.forEach(a => {
    let name = a.textContent.trim();

    if (name.endsWith("/") && name !== "../") {
      const carpeta = name.replace("/", "");
      lista.innerHTML += `<a href="${carpeta}/">${carpeta}</a>`;
    }
  });

  if (lista.innerHTML.trim() === "") {
    lista.innerHTML = "No hay carpetas visibles.";
  }
}

cargarCarpetas();
</script>

</body>
</html>
