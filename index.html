<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Maikolfluence</title>

<!-- Fuente elegante -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;400;600&display=swap" rel="stylesheet">

<style>
    body {
        margin: 0;
        padding: 0;
        background: #000;
        color: #fff;
        font-family: 'Inter', sans-serif;
        min-height: 100vh;
        overflow-x: hidden;
    }

    /* Canvas de constelaciones */
    #bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
    }

    h1 {
        font-weight: 300;
        margin-top: 60px;
        text-align: center;
        font-size: 3rem;
        letter-spacing: 1px;
    }

    h2 {
        text-align: center;
        font-weight: 200;
        opacity: 0.7;
        margin-top: -10px;
        margin-bottom: 40px;
    }

    #lista {
        max-width: 600px;
        margin: auto;
        display: flex;
        flex-direction: column;
        gap: 12px;
        padding: 20px;
    }

    #lista a {
        color: #7fb4ff;
        text-decoration: none;
        font-size: 1.3rem;
        border: 1px solid #7fb4ff55;
        padding: 10px 15px;
        border-radius: 8px;
        transition: 0.2s;
        backdrop-filter: blur(5px);
    }

    #lista a:hover {
        background: #7fb4ff22;
    }
</style>
</head>

<body>

<canvas id="bg"></canvas>

<h1>Maikolfluence</h1>
<h2>Carpetas disponibles</h2>

<div id="lista">Cargando...</div>

<!-- Fondo animado tipo constelaciones -->
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script>
particlesJS("bg", {
  "particles": {
    "number": { "value": 90 },
    "size": { "value": 2 },
    "color": { "value": "#7fb4ff" },
    "line_linked": { "enable": true, "distance": 150, "color": "#7fb4ff", "opacity": 0.5 },
    "move": { "speed": 1.2 }
  },
  "interactivity": {
    "events": {
      "onhover": { "enable": true, "mode": "grab" }
    }
  }
});
</script>

<!-- Script para detectar carpetas aunque el servidor entregue HTML feo -->
<script>
async function cargarCarpetas() {
  const lista = document.getElementById("lista");
  lista.innerHTML = "Cargando...";

  let texto = "";

  try {
    const resp = await fetch(".", { cache: "no-store" });
    texto = await resp.text();
  } catch (e) {
    lista.innerHTML = "No pude leer el listado del servidor.";
    return;
  }

  // Intentar parsear como HTML
  let parser = new DOMParser();
  let doc = parser.parseFromString(texto, "text/html");
  let links = [...doc.querySelectorAll("a")];

  if (links.length > 0) {
    lista.innerHTML = "";
    links.forEach(a => {
      const nombre = a.textContent.trim();
      if (nombre.endsWith("/") && nombre !== "../") {
        const carpeta = nombre.replace("/", "");
        lista.innerHTML += `<a href="${carpeta}/">${carpeta}</a>`;
      }
    });

    if (lista.innerHTML.trim() !== "") return;
  }

  // Si HTML fallÃ³, intentar como texto plano
  lista.innerHTML = "";
  const lineas = texto.split("\n");

  lineas.forEach(l => {
    // detecta carpeta tipo "nombre/"
    const match = l.match(/([A-Za-z0-9._-]+)\//);
    if (match) {
      const carpeta = match[1];
      if (carpeta !== "." && carpeta !== "..") {
        lista.innerHTML += `<a href="${carpeta}/">${carpeta}</a>`;
      }
    }
  });

  if (lista.innerHTML.trim() === "") {
    lista.innerHTML = "No pude detectar carpetas en el listado.";
  }
}

cargarCarpetas();
</script>

</body>
</html>
